<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Task Management System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    :root {
      --primary:      #6366f1; /* Indigo-500 */
      --primary-alt:  #4f46e5; /* Indigo-600 */
      --secondary:    #8b5cf6; /* Violet-500 */
      --accent:       #10b981; /* Emerald-500 */
      --warning:      #f59e0b; /* Amber-500 */
      --danger:       #ef4444; /* Red-500 */
      --success:      #22c55e; /* Green-500 */
      --text:         #1e293b; /* Slate-800 */
      --text-light:   #64748b; /* Slate-600 */
      --bg:           linear-gradient(135deg, #f0f4ff 0%, #e6f7ff 100%);
      --card-bg:      rgba(255, 255, 255, 0.92);
      --sidebar-bg:   rgba(255, 255, 255, 0.85);
      --header-bg:    linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      background-attachment: fixed;
    }

    /* Dashboard containers */
    .dashboard-container { 
      display: none; 
      min-height: 100vh;
    }
    .dashboard-active { 
      display: block;
      animation: fadeIn 0.5s ease;
    }

    /* Header styles */
    .dashboard-header {
      background: var(--header-bg);
      color: white;
      padding: 1.5rem 2rem;
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.2);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    /* Navigation tabs */
    .nav-tabs {
      background: var(--sidebar-bg);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
      padding: 0.75rem;
      margin: 1.5rem auto;
      max-width: 42rem;
    }

    .nav-tab {
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .nav-tab:hover {
      background: rgba(99, 102, 241, 0.1);
    }

    .nav-tab.active {
      color: var(--primary);
      background: rgba(255, 255, 255, 0.95);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
    }

    .nav-tab.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--primary);
      border-radius: 4px 4px 0 0;
    }

    /* Task cards */
    .task-card {
      background: var(--card-bg);
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.05);
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      overflow: hidden;
      position: relative;
      border: 1px solid rgba(226, 232, 240, 0.6);
    }

    .task-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 24px rgba(99, 102, 241, 0.15);
    }

    .task-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      height: 4px;
      width: 100%;
      background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
    }

    /* Buttons */
    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .btn-primary {
      background: var(--primary);
      color: white;
      border: none;
    }

    .btn-primary:hover {
      background: var(--primary-alt);
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(79, 70, 229, 0.3);
    }

    .btn-success {
      background: var(--success);
      color: white;
      border: none;
    }

    .btn-warning {
      background: var(--warning);
      color: white;
      border: none;
    }

    .btn-danger {
      background: var(--danger);
      color: white;
      border: none;
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .btn-outline:hover {
      background: var(--primary);
      color: white;
    }

    /* Badges */
    .badge {
      padding: 0.35rem 0.8rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
    }

    .badge-primary {
      background: rgba(99, 102, 241, 0.15);
      color: var(--primary);
    }

    .badge-success {
      background: rgba(34, 197, 94, 0.15);
      color: var(--success);
    }

    .badge-warning {
      background: rgba(245, 158, 11, 0.15);
      color: var(--warning);
    }

    .badge-danger {
      background: rgba(239, 68, 68, 0.15);
      color: var(--danger);
    }

    /* Status indicators */
    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 6px;
    }

    .status-free { background: var(--success); }
    .status-busy { background: var(--danger); }

    /* Modal styles */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }

    .modal-content {
      background: var(--card-bg);
      border-radius: 24px;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      width: 90%;
      max-width: 500px;
      overflow: hidden;
      animation: slideIn 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      position: relative;
    }

    .modal-close {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(239, 68, 68, 0.1);
      color: var(--danger);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .modal-close:hover {
      background: var(--danger);
      color: white;
      transform: rotate(90deg);
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .animate__animated { --animate-duration: 0.3s; }

    /* Section headings */
    .section-heading {
      position: relative;
      padding-bottom: 1rem;
      margin-bottom: 1.5rem;
    }

    .section-heading::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 4px;
      background: var(--primary);
      border-radius: 4px;
    }

    /* Inputs and form elements */
    .input-field {
      padding: 0.85rem 1.25rem;
      border-radius: 12px;
      border: 1px solid #e2e8f0;
      background: rgba(255, 255, 255, 0.7);
      width: 100%;
      transition: all 0.3s ease;
      font-family: inherit;
    }

    .input-field:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      width: 8px;
    }

    ::-webkit-scrollbar-track {
      background: rgba(226, 232, 240, 0.3);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(99, 102, 241, 0.5);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary);
    }

    /* Employee badge styling */
    .employee-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.35rem 1rem;
      border-radius: 9999px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .employee-abuzar {
      background: linear-gradient(135deg, #6366f1 0%, #818cf8 100%);
      color: white;
    }

    .employee-kamran {
      background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
      color: white;
    }

    /* Empty state */
    .empty-state {
      background: rgba(255, 255, 255, 0.7);
      border-radius: 16px;
      padding: 3rem 2rem;
      text-align: center;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.05);
    }

    .empty-state i {
      font-size: 3rem;
      color: #cbd5e1;
      margin-bottom: 1.5rem;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .nav-tabs {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .nav-tab {
        width: 100%;
        text-align: center;
      }
      
      .dashboard-header {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
      }
      
      .task-card {
        flex-direction: column;
      }
      
      .task-card > div:last-child {
        margin-left: 0;
        margin-top: 1rem;
        width: 100%;
      }
    }
  </style>
</head>
<body class="min-h-screen" x-data="mainApp()">
  <!-- User Selection Modal -->
  <div x-show="showUserSelect" class="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md animate__animated animate__zoomIn">
      <div class="text-center mb-8">
        <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-indigo-100 flex items-center justify-center">
          <i class="fas fa-users text-4xl text-indigo-600"></i>
        </div>
        <h2 class="text-2xl font-bold text-gray-800">Who are you?</h2>
        <p class="text-gray-600 mt-2">Select your dashboard</p>
      </div>
      
      <div class="grid grid-cols-1 gap-4">

        <button @click="selectUser('OWNER')" 
                class="px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center bg-gradient-to-r from-emerald-500 to-emerald-700 text-white hover:from-emerald-600 hover:to-emerald-800 transform hover:-translate-y-1">
          <i class="fas fa-crown text-xl mr-3"></i>
          <span class="text-xl font-bold">SIR ATIF BAWA</span>
        </button>

        <button @click="selectUser('ABUZAR')" 
                class="px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center bg-gradient-to-r from-indigo-500 to-indigo-700 text-white hover:from-indigo-600 hover:to-indigo-800 transform hover:-translate-y-1">
          <i class="fas fa-user-tie text-xl mr-3"></i>
          <span class="text-xl font-bold">ABUZAR</span>
        </button>
        
        <button @click="selectUser('KAMRAN')" 
                class="px-6 py-4 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center bg-gradient-to-r from-violet-500 to-violet-700 text-white hover:from-violet-600 hover:to-violet-800 transform hover:-translate-y-1">
          <i class="fas fa-user-cog text-xl mr-3"></i>
          <span class="text-xl font-bold">KAMRAN</span>
        </button>
        
        
      </div>
    </div>
  </div>

  <!-- ABUZAR Dashboard -->
  <div id="ABUZAR_dashboard" class="dashboard-container" :class="{'dashboard-active': currentUser === 'ABUZAR'}">
    <header class="dashboard-header flex flex-wrap justify-between items-center">
      <div class="flex items-center">
        <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center mr-4">
          <i class="fas fa-user-tie text-2xl text-indigo-600"></i>
        </div>
        <h1 class="text-3xl font-bold text-white uppercase">ABUZAR'S DASHBOARD</h1>
      </div>
      
      <button @click="dashboards.ABUZAR.toggleStatus()" 
              class="px-5 py-2.5 rounded-xl shadow-lg transition-all flex items-center"
              :class="dashboards.ABUZAR.status === 'BUSY' ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'">
        <span class="status-indicator" :class="dashboards.ABUZAR.status === 'BUSY' ? 'status-busy' : 'status-free'"></span>
        <span class="font-semibold text-white" x-text="dashboards.ABUZAR.status"></span>
      </button>
    </header>

    <nav class="nav-tabs flex justify-center space-x-2">
      <button @click="dashboards.ABUZAR.tab='today'" 
              :class="dashboards.ABUZAR.tab==='today'?'nav-tab active':'nav-tab'">
        <i class="fas fa-calendar-day mr-2"></i>TODAY TASKS
      </button>
      <button @click="dashboards.ABUZAR.tab='active'" 
              :class="dashboards.ABUZAR.tab==='active'?'nav-tab active':'nav-tab'">
        <i class="fas fa-tasks mr-2"></i>ACTIVE TASKS
      </button>
      <button @click="dashboards.ABUZAR.tab='done'" 
              :class="dashboards.ABUZAR.tab==='done'?'nav-tab active':'nav-tab'">
        <i class="fas fa-check-circle mr-2"></i>TASKS DONE
      </button>
    </nav>

    <main class="flex-grow mt-2 mx-auto w-full md:max-w-4xl p-4">
      <!-- TODAY TASKS -->
      <section x-show="dashboards.ABUZAR.tab==='today'" x-transition class="animate__animated animate__fadeIn">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold uppercase text-slate-800">TODAY'S TASKS</h2>
          <button @click="dashboards.ABUZAR.showTodayModal=true" 
                  class="btn btn-primary">
            <i class="fas fa-plus mr-2"></i>SELECT TASKS
          </button>
        </div>
        
        <template x-if="dashboards.ABUZAR.todayTasks.length === 0">
          <div class="empty-state">
            <i class="fas fa-inbox text-4xl"></i>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">No tasks for today</h3>
            <p class="text-slate-500">Select tasks from your active list to get started</p>
          </div>
        </template>
        
        <template x-for="job in dashboards.ABUZAR.todayTasks" :key="job.id">
          <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp">
            <div class="flex justify-between items-start">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <h4 class="text-xl font-bold uppercase text-slate-800" x-text="job.name"></h4>
                  <span class="badge badge-warning ml-3" x-text="job.payment === 'PENDING' ? 'NOT PAID' : job.payment"></span>
                </div>
                
                <p class="text-slate-600 mb-4">
                  <span class="cursor-pointer hover:text-primary transition-colors" 
                        @click="dashboards.ABUZAR.showDesc(job)" 
                        x-text="job.description.slice(0,60)+'...'"></span>
                </p>
                
                <div class="flex flex-wrap gap-3">
                  <div class="flex items-center text-slate-500">
                    <i class="far fa-calendar-alt mr-2"></i>
                    <span class="font-medium">Deadline:</span>
                    <span class="ml-1" x-text="job.deadline"></span>
                  </div>
                  
                  <div class="flex items-center text-slate-500">
                    <i class="fas fa-sync-alt mr-2"></i>
                    <span class="font-medium">Revisions:</span>
                    <span class="ml-1" x-text="job.revisions"></span>
                  </div>
                </div>
              </div>
              
              <div class="ml-4 flex flex-col gap-2">
                <button @click="dashboards.ABUZAR.markDoneById(job.id)" 
                        class="btn btn-success">
                  <i class="fas fa-check mr-2"></i>MARK DONE
                </button>
              </div>
            </div>
          </div>
        </template>
      </section>

      <!-- ACTIVE TASKS -->
      <section x-show="dashboards.ABUZAR.tab==='active'" x-transition class="animate__animated animate__fadeIn">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold uppercase text-slate-800">ACTIVE TASKS</h2>
          <button @click="dashboards.ABUZAR.showAddModal=true" 
                  class="btn btn-primary">
            <i class="fas fa-plus mr-2"></i>ADD TASK
          </button>
        </div>
        
        <template x-if="dashboards.ABUZAR.activeTasks().length === 0">
          <div class="empty-state">
            <i class="fas fa-clipboard-list text-4xl"></i>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">No active tasks</h3>
            <p class="text-slate-500">Add a new task to get started</p>
          </div>
        </template>
        
        <template x-for="job in dashboards.ABUZAR.activeTasks()" :key="job.id">
          <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp">
            <div class="flex flex-col md:flex-row justify-between items-start gap-5">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <input x-model="job.name" type="text" class="input-field text-lg font-bold uppercase" placeholder="Task name" />
                  <button @click="dashboards.ABUZAR.save()" class="ml-3 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-save text-xl"></i>
                  </button>
                </div>
                
                <textarea x-model="job.description" placeholder="Description" class="input-field h-24 mb-4"></textarea>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                      <i class="far fa-calendar-plus mr-2"></i>CREATED DATE
                    </label>
                    <input type="date" x-model="job.created" class="input-field" />
                  </div>
                  
                  <div>
                    <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                      <i class="far fa-calendar-check mr-2"></i>DEADLINE
                    </label>
                    <input type="date" x-model="job.deadline" class="input-field" />
                  </div>
                </div>
              </div>
              
              <div class="w-full md:w-48 flex flex-col gap-3">
                <button @click="dashboards.ABUZAR.markDoneById(job.id)" 
                        class="btn btn-success">
                  <i class="fas fa-check mr-2"></i>MARK DONE
                </button>
                
                <div class="bg-slate-50 rounded-xl p-3">
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-sync-alt mr-2"></i>REVISIONS
                  </label>
                  <div class="flex items-center justify-between">
                    <button @click="dashboards.ABUZAR.changeRevisionById(job.id,-1)" 
                            class="w-10 h-10 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center">
                      <i class="fas fa-minus"></i>
                    </button>
                    <span class="text-xl font-bold px-4" x-text="job.revisions"></span>
                    <button @click="dashboards.ABUZAR.changeRevisionById(job.id,1)" 
                            class="w-10 h-10 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center">
                      <i class="fas fa-plus"></i>
                    </button>
                  </div>
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-money-bill-wave mr-2"></i>PAYMENT
                  </label>
                  <select x-model="job.payment" class="input-field">
                    <option value="NOT PAID">NOT PAID</option>
                    <option value="PAID">PAID</option>
                    <option value="DON'T KNOW">DON'T KNOW</option>
                  </select>
                </div>
                
                <button @click="dashboards.ABUZAR.removeById(job.id)" 
                        class="btn btn-danger mt-2">
                  <i class="fas fa-trash mr-2"></i>DELETE
                </button>
              </div>
            </div>
          </div>
        </template>
      </section>

      <!-- TASKS DONE -->
      <section x-show="dashboards.ABUZAR.tab==='done'" x-transition class="animate__animated animate__fadeIn">
        <h2 class="text-2xl font-bold uppercase text-slate-800 mb-6">JOBS DONE</h2>
        
        <template x-if="dashboards.ABUZAR.doneTasks().length === 0">
          <div class="empty-state">
            <i class="fas fa-check-circle text-4xl"></i>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">No completed tasks yet</h3>
            <p class="text-slate-500">Complete some tasks to see them here</p>
          </div>
        </template>
        
        <template x-for="job in dashboards.ABUZAR.doneTasks()" :key="job.id">
          <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp">
            <div class="flex flex-col md:flex-row justify-between items-start gap-5">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <h4 class="text-xl font-bold uppercase text-slate-800" x-text="job.name"></h4>
                  <span class="badge badge-success ml-3" x-text="job.payment === 'PENDING' ? 'NOT PAID' : job.payment"></span>
                </div>
                
                <p class="text-slate-600 mb-4" x-text="job.description"></p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="flex items-center">
                    <i class="far fa-calendar-check text-slate-500 mr-2"></i>
                    <div>
                      <div class="text-xs uppercase text-slate-500">DONE ON</div>
                      <div class="font-medium" x-text="job.done"></div>
                    </div>
                  </div>
                  
                  <div class="flex items-center">
                    <i class="far fa-clock text-slate-500 mr-2"></i>
                    <div>
                      <div class="text-xs uppercase text-slate-500">DEADLINE</div>
                      <div class="font-medium" x-text="job.deadline"></div>
                    </div>
                  </div>
                  
                  <div class="flex items-center">
                    <i class="fas fa-sync-alt text-slate-500 mr-2"></i>
                    <div>
                      <div class="text-xs uppercase text-slate-500">REVISIONS</div>
                      <div class="font-medium" x-text="job.revisions"></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="w-full md:w-40">
                <button @click="dashboards.ABUZAR.reviseAgain(job.id)" 
                        class="btn btn-warning w-full">
                  <i class="fas fa-redo mr-2"></i>REVISE AGAIN
                </button>
              </div>
            </div>
          </div>
        </template>
      </section>
    </main>

    <!-- MODALS for ABUZAR -->
    <template x-if="dashboards.ABUZAR.showAddModal || dashboards.ABUZAR.showDescModal || dashboards.ABUZAR.showTodayModal">
      <div class="modal-overlay">
        <div class="modal-content">
          <div class="modal-close" @click="dashboards.ABUZAR.closeModals()">
            <i class="fas fa-times"></i>
          </div>
          
          <!-- ADD TASK -->
          <template x-if="dashboards.ABUZAR.showAddModal">
            <div class="p-6">
              <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-plus-circle text-indigo-600 mr-3"></i>
                ADD NEW TASK
              </h3>
              
              <div class="space-y-4">
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="far fa-calendar-plus mr-2"></i>CREATION DATE
                  </label>
                  <input type="text" x-bind:value="dashboards.ABUZAR.newJob.created" readonly class="input-field bg-slate-100" />
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-heading mr-2"></i>TASK NAME
                  </label>
                  <input x-model="dashboards.ABUZAR.newJob.name" type="text" placeholder="Job Name" class="input-field" />
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-align-left mr-2"></i>DESCRIPTION
                  </label>
                  <textarea x-model="dashboards.ABUZAR.newJob.description" placeholder="Description" class="input-field h-32"></textarea>
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="far fa-calendar-check mr-2"></i>DEADLINE
                  </label>
                  <input x-model="dashboards.ABUZAR.newJob.deadline" type="date" class="input-field" />
                </div>
              </div>
              
              <div class="flex justify-end space-x-3 mt-8">
                <button @click="dashboards.ABUZAR.addJob()" class="btn btn-primary">
                  <i class="fas fa-plus mr-2"></i>ADD TASK
                </button>
                <button @click="dashboards.ABUZAR.closeModals()" class="btn btn-outline">
                  CANCEL
                </button>
              </div>
            </div>
          </template>

          <!-- DESCRIPTION POPUP -->
          <template x-if="dashboards.ABUZAR.showDescModal">
            <div class="p-6">
              <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-align-left text-indigo-600 mr-3"></i>
                DESCRIPTION
              </h3>
              
              <div class="bg-slate-50 rounded-xl p-5 mb-6">
                <p x-text="dashboards.ABUZAR.descContent" class="whitespace-pre-line"></p>
              </div>
              
              <button @click="dashboards.ABUZAR.closeModals()" class="btn btn-primary w-full">
                <i class="fas fa-check mr-2"></i>CLOSE
              </button>
            </div>
          </template>

          <!-- TODAY SELECT -->
          <template x-if="dashboards.ABUZAR.showTodayModal">
            <div class="p-6">
              <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-calendar-day text-indigo-600 mr-3"></i>
                SELECT TODAY'S TASKS
              </h3>
              
              <div class="max-h-80 overflow-y-auto pr-2 mb-6">
                <template x-for="job in dashboards.ABUZAR.activeTasks()" :key="job.id">
                  <div class="flex items-center mb-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer" 
                       @click="dashboards.ABUZAR.toggleSelection(job.id)">
                    <input type="checkbox" :value="job.id" x-model="dashboards.ABUZAR.selectedToday" class="w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500" />
                    <div class="ml-3">
                      <div class="font-medium text-slate-800" x-text="job.name"></div>
                      <div class="text-sm text-slate-500" x-text="job.description.slice(0, 40) + '...'"></div>
                    </div>
                  </div>
                </template>
              </div>
              
              <div class="flex justify-end space-x-3">
                <button @click="dashboards.ABUZAR.addTodayTasks()" class="btn btn-primary">
                  <i class="fas fa-check mr-2"></i>SELECT TASKS
                </button>
                <button @click="dashboards.ABUZAR.closeModals()" class="btn btn-outline">
                  CANCEL
                </button>
              </div>
            </div>
          </template>
        </div>
      </div>
    </template>
  </div>

  <!-- KAMRAN Dashboard - Similar structure with different color accents -->
  <div id="KAMRAN_dashboard" class="dashboard-container" :class="{'dashboard-active': currentUser === 'KAMRAN'}">
<header class="dashboard-header flex flex-wrap justify-between items-center">
      <div class="flex items-center">
        <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center mr-4">
          <i class="fas fa-user-tie text-2xl text-indigo-600"></i>
        </div>
        <h1 class="text-3xl font-bold text-white uppercase">KAMRAN'S DASHBOARD</h1>
      </div>
      
      <button @click="dashboards.KAMRAN.toggleStatus()" 
              class="px-5 py-2.5 rounded-xl shadow-lg transition-all flex items-center"
              :class="dashboards.KAMRAN.status === 'BUSY' ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'">
        <span class="status-indicator" :class="dashboards.KAMRAN.status === 'BUSY' ? 'status-busy' : 'status-free'"></span>
        <span class="font-semibold text-white" x-text="dashboards.KAMRAN.status"></span>
      </button>
    </header>

    <nav class="nav-tabs flex justify-center space-x-2">
      <button @click="dashboards.KAMRAN.tab='today'" 
              :class="dashboards.KAMRAN.tab==='today'?'nav-tab active':'nav-tab'">
        <i class="fas fa-calendar-day mr-2"></i>TODAY TASKS
      </button>
      <button @click="dashboards.KAMRAN.tab='active'" 
              :class="dashboards.KAMRAN.tab==='active'?'nav-tab active':'nav-tab'">
        <i class="fas fa-tasks mr-2"></i>ACTIVE TASKS
      </button>
      <button @click="dashboards.KAMRAN.tab='done'" 
              :class="dashboards.KAMRAN.tab==='done'?'nav-tab active':'nav-tab'">
        <i class="fas fa-check-circle mr-2"></i>TASKS DONE
      </button>
    </nav>

    <main class="flex-grow mt-2 mx-auto w-full md:max-w-4xl p-4">
      <!-- TODAY TASKS -->
      <section x-show="dashboards.KAMRAN.tab==='today'" x-transition class="animate__animated animate__fadeIn">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold uppercase text-slate-800">TODAY'S TASKS</h2>
          <button @click="dashboards.KAMRAN.showTodayModal=true" 
                  class="btn btn-primary">
            <i class="fas fa-plus mr-2"></i>SELECT TASKS
          </button>
        </div>
        
        <template x-if="dashboards.KAMRAN.todayTasks.length === 0">
          <div class="empty-state">
            <i class="fas fa-inbox text-4xl"></i>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">No tasks for today</h3>
            <p class="text-slate-500">Select tasks from your active list to get started</p>
          </div>
        </template>
        
        <template x-for="job in dashboards.KAMRAN.todayTasks" :key="job.id">
          <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp">
            <div class="flex justify-between items-start">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <h4 class="text-xl font-bold uppercase text-slate-800" x-text="job.name"></h4>
                  <span class="badge badge-warning ml-3" x-text="job.payment === 'PENDING' ? 'NOT PAID' : job.payment"></span>
                </div>
                
                <p class="text-slate-600 mb-4">
                  <span class="cursor-pointer hover:text-primary transition-colors" 
                        @click="dashboards.KAMRAN.showDesc(job)" 
                        x-text="job.description.slice(0,60)+'...'"></span>
                </p>
                
                <div class="flex flex-wrap gap-3">
                  <div class="flex items-center text-slate-500">
                    <i class="far fa-calendar-alt mr-2"></i>
                    <span class="font-medium">Deadline:</span>
                    <span class="ml-1" x-text="job.deadline"></span>
                  </div>
                  
                  <div class="flex items-center text-slate-500">
                    <i class="fas fa-sync-alt mr-2"></i>
                    <span class="font-medium">Revisions:</span>
                    <span class="ml-1" x-text="job.revisions"></span>
                  </div>
                </div>
              </div>
              
              <div class="ml-4 flex flex-col gap-2">
                <button @click="dashboards.KAMRAN.markDoneById(job.id)" 
                        class="btn btn-success">
                  <i class="fas fa-check mr-2"></i>MARK DONE
                </button>
              </div>
            </div>
          </div>
        </template>
      </section>

      <!-- ACTIVE TASKS -->
      <section x-show="dashboards.KAMRAN.tab==='active'" x-transition class="animate__animated animate__fadeIn">
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold uppercase text-slate-800">ACTIVE TASKS</h2>
          <button @click="dashboards.KAMRAN.showAddModal=true" 
                  class="btn btn-primary">
            <i class="fas fa-plus mr-2"></i>ADD TASK
          </button>
        </div>
        
        <template x-if="dashboards.KAMRAN.activeTasks().length === 0">
          <div class="empty-state">
            <i class="fas fa-clipboard-list text-4xl"></i>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">No active tasks</h3>
            <p class="text-slate-500">Add a new task to get started</p>
          </div>
        </template>
        
        <template x-for="job in dashboards.KAMRAN.activeTasks()" :key="job.id">
          <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp">
            <div class="flex flex-col md:flex-row justify-between items-start gap-5">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <input x-model="job.name" type="text" class="input-field text-lg font-bold uppercase" placeholder="Task name" />
                  <button @click="dashboards.KAMRAN.save()" class="ml-3 text-indigo-600 hover:text-indigo-800">
                    <i class="fas fa-save text-xl"></i>
                  </button>
                </div>
                
                <textarea x-model="job.description" placeholder="Description" class="input-field h-24 mb-4"></textarea>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                      <i class="far fa-calendar-plus mr-2"></i>CREATED DATE
                    </label>
                    <input type="date" x-model="job.created" class="input-field" />
                  </div>
                  
                  <div>
                    <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                      <i class="far fa-calendar-check mr-2"></i>DEADLINE
                    </label>
                    <input type="date" x-model="job.deadline" class="input-field" />
                  </div>
                </div>
              </div>
              
              <div class="w-full md:w-48 flex flex-col gap-3">
                <button @click="dashboards.KAMRAN.markDoneById(job.id)" 
                        class="btn btn-success">
                  <i class="fas fa-check mr-2"></i>MARK DONE
                </button>
                
                <div class="bg-slate-50 rounded-xl p-3">
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-sync-alt mr-2"></i>REVISIONS
                  </label>
                  <div class="flex items-center justify-between">
                    <button @click="dashboards.KAMRAN.changeRevisionById(job.id,-1)" 
                            class="w-10 h-10 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center">
                      <i class="fas fa-minus"></i>
                    </button>
                    <span class="text-xl font-bold px-4" x-text="job.revisions"></span>
                    <button @click="dashboards.KAMRAN.changeRevisionById(job.id,1)" 
                            class="w-10 h-10 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center">
                      <i class="fas fa-plus"></i>
                    </button>
                  </div>
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-money-bill-wave mr-2"></i>PAYMENT
                  </label>
                  <select x-model="job.payment" class="input-field">
                    <option value="NOT PAID">NOT PAID</option>
                    <option value="PAID">PAID</option>
                    <option value="DON'T KNOW">DON'T KNOW</option>
                  </select>
                </div>
                
                <button @click="dashboards.KAMRAN.removeById(job.id)" 
                        class="btn btn-danger mt-2">
                  <i class="fas fa-trash mr-2"></i>DELETE
                </button>
              </div>
            </div>
          </div>
        </template>
      </section>

      <!-- TASKS DONE -->
      <section x-show="dashboards.KAMRAN.tab==='done'" x-transition class="animate__animated animate__fadeIn">
        <h2 class="text-2xl font-bold uppercase text-slate-800 mb-6">JOBS DONE</h2>
        
        <template x-if="dashboards.KAMRAN.doneTasks().length === 0">
          <div class="empty-state">
            <i class="fas fa-check-circle text-4xl"></i>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">No completed tasks yet</h3>
            <p class="text-slate-500">Complete some tasks to see them here</p>
          </div>
        </template>
        
        <template x-for="job in dashboards.KAMRAN.doneTasks()" :key="job.id">
          <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp">
            <div class="flex flex-col md:flex-row justify-between items-start gap-5">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <h4 class="text-xl font-bold uppercase text-slate-800" x-text="job.name"></h4>
                  <span class="badge badge-success ml-3" x-text="job.payment === 'PENDING' ? 'NOT PAID' : job.payment"></span>
                </div>
                
                <p class="text-slate-600 mb-4" x-text="job.description"></p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div class="flex items-center">
                    <i class="far fa-calendar-check text-slate-500 mr-2"></i>
                    <div>
                      <div class="text-xs uppercase text-slate-500">DONE ON</div>
                      <div class="font-medium" x-text="job.done"></div>
                    </div>
                  </div>
                  
                  <div class="flex items-center">
                    <i class="far fa-clock text-slate-500 mr-2"></i>
                    <div>
                      <div class="text-xs uppercase text-slate-500">DEADLINE</div>
                      <div class="font-medium" x-text="job.deadline"></div>
                    </div>
                  </div>
                  
                  <div class="flex items-center">
                    <i class="fas fa-sync-alt text-slate-500 mr-2"></i>
                    <div>
                      <div class="text-xs uppercase text-slate-500">REVISIONS</div>
                      <div class="font-medium" x-text="job.revisions"></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="w-full md:w-40">
                <button @click="dashboards.KAMRAN.reviseAgain(job.id)" 
                        class="btn btn-warning w-full">
                  <i class="fas fa-redo mr-2"></i>REVISE AGAIN
                </button>
              </div>
            </div>
          </div>
        </template>
      </section>
    </main>

    <!-- MODALS for KAMRAN -->
    <template x-if="dashboards.KAMRAN.showAddModal || dashboards.KAMRAN.showDescModal || dashboards.KAMRAN.showTodayModal">
      <div class="modal-overlay">
        <div class="modal-content">
          <div class="modal-close" @click="dashboards.KAMRAN.closeModals()">
            <i class="fas fa-times"></i>
          </div>
          
          <!-- ADD TASK -->
          <template x-if="dashboards.KAMRAN.showAddModal">
            <div class="p-6">
              <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-plus-circle text-indigo-600 mr-3"></i>
                ADD NEW TASK
              </h3>
              
              <div class="space-y-4">
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="far fa-calendar-plus mr-2"></i>CREATION DATE
                  </label>
                  <input type="text" x-bind:value="dashboards.KAMRAN.newJob.created" readonly class="input-field bg-slate-100" />
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-heading mr-2"></i>TASK NAME
                  </label>
                  <input x-model="dashboards.KAMRAN.newJob.name" type="text" placeholder="Job Name" class="input-field" />
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="fas fa-align-left mr-2"></i>DESCRIPTION
                  </label>
                  <textarea x-model="dashboards.KAMRAN.newJob.description" placeholder="Description" class="input-field h-32"></textarea>
                </div>
                
                <div>
                  <label class="text-sm uppercase block mb-2 font-medium text-slate-600">
                    <i class="far fa-calendar-check mr-2"></i>DEADLINE
                  </label>
                  <input x-model="dashboards.KAMRAN.newJob.deadline" type="date" class="input-field" />
                </div>
              </div>
              
              <div class="flex justify-end space-x-3 mt-8">
                <button @click="dashboards.KAMRAN.addJob()" class="btn btn-primary">
                  <i class="fas fa-plus mr-2"></i>ADD TASK
                </button>
                <button @click="dashboards.KAMRAN.closeModals()" class="btn btn-outline">
                  CANCEL
                </button>
              </div>
            </div>
          </template>

          <!-- DESCRIPTION POPUP -->
          <template x-if="dashboards.KAMRAN.showDescModal">
            <div class="p-6">
              <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-align-left text-indigo-600 mr-3"></i>
                DESCRIPTION
              </h3>
              
              <div class="bg-slate-50 rounded-xl p-5 mb-6">
                <p x-text="dashboards.KAMRAN.descContent" class="whitespace-pre-line"></p>
              </div>
              
              <button @click="dashboards.KAMRAN.closeModals()" class="btn btn-primary w-full">
                <i class="fas fa-check mr-2"></i>CLOSE
              </button>
            </div>
          </template>

          <!-- TODAY SELECT -->
          <template x-if="dashboards.KAMRAN.showTodayModal">
            <div class="p-6">
              <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center">
                <i class="fas fa-calendar-day text-indigo-600 mr-3"></i>
                SELECT TODAY'S TASKS
              </h3>
              
              <div class="max-h-80 overflow-y-auto pr-2 mb-6">
                <template x-for="job in dashboards.KAMRAN.activeTasks()" :key="job.id">
                  <div class="flex items-center mb-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer" 
                       @click="dashboards.KAMRAN.toggleSelection(job.id)">
                    <input type="checkbox" :value="job.id" x-model="dashboards.KAMRAN.selectedToday" class="w-5 h-5 text-indigo-600 rounded focus:ring-indigo-500" />
                    <div class="ml-3">
                      <div class="font-medium text-slate-800" x-text="job.name"></div>
                      <div class="text-sm text-slate-500" x-text="job.description.slice(0, 40) + '...'"></div>
                    </div>
                  </div>
                </template>
              </div>
              
              <div class="flex justify-end space-x-3">
                <button @click="dashboards.KAMRAN.addTodayTasks()" class="btn btn-primary">
                  <i class="fas fa-check mr-2"></i>SELECT TASKS
                </button>
                <button @click="dashboards.KAMRAN.closeModals()" class="btn btn-outline">
                  CANCEL
                </button>
              </div>
            </div>
          </template>
        </div>
      </div>
    </template>
  </div>

  <!-- OWNER Dashboard -->
<div
  id="OWNER_dashboard"
  x-data="ownerData"
  x-init="init()"
  class="dashboard-container"
  :class="{'dashboard-active': currentUser==='OWNER'}"
>
  <!-- Header -->
  <header class="dashboard-header flex flex-wrap justify-between items-center">
    <div class="flex items-center">
      <div class="w-12 h-12 rounded-full bg-white flex items-center justify-center mr-4">
        <i class="fas fa-user-shield text-2xl text-accent"></i>
      </div>
      <h1 class="text-3xl font-bold text-white uppercase">SIR ATIF BAWA</h1>
    </div>
    <div class="flex space-x-2">
      <template x-for="emp in employees" :key="emp">
        <button
          @click="toggleStatus(emp)"
          class="px-5 py-2.5 rounded-xl shadow-lg transition-all flex items-center uppercase"
          :class="status[emp]==='BUSY'
                    ? 'bg-danger hover:bg-danger-600 text-white'
                    : 'bg-success hover:bg-success-600 text-white'"
        >
          <span class="status-indicator" :class="status[emp]==='BUSY' ? 'status-busy' : 'status-free'"></span>
          <span class="font-semibold" x-text="`${emp}: ${status[emp]}`"></span>
        </button>
      </template>
    </div>
  </header>

  <!-- Tabs -->
  <nav class="nav-tabs flex justify-center space-x-2">
    <button @click="tab='today'"  :class="tab==='today'  ? 'nav-tab active' : 'nav-tab'">
      <i class="fas fa-calendar-day mr-2"></i>TODAY'S TASKS
    </button>
    <button @click="tab='active'" :class="tab==='active'? 'nav-tab active' : 'nav-tab'">
      <i class="fas fa-tasks mr-2"></i>ACTIVE TASKS
    </button>
    <button @click="tab='done'"   :class="tab==='done'?   'nav-tab active' : 'nav-tab'">
      <i class="fas fa-check-circle mr-2"></i>TASKS DONE
    </button>
  </nav>

  <main class="flex-grow mt-2 mx-auto w-full md:max-w-6xl p-4">
    <!-- TODAY -->
    <section x-show="tab==='today'" x-transition class="animate__animated animate__fadeIn">
      <h2 class="text-2xl font-bold uppercase text-slate-800 mb-6">TODAY'S TASKS</h2>
      <template x-for="emp in employees" :key="emp">
        <div class="mb-8">
          <h3 class="section-heading flex items-center mb-4">
            <span :class="`employee-badge employee-${emp.toLowerCase()}`" class="mr-2" x-text="emp"></span>
            Today's Tasks
            <span class="badge ml-3" :class="status[emp]==='BUSY' ? 'badge-danger' : 'badge-success'">
              <span x-text="status[emp]"></span>
            </span>
          </h3>
          <template x-if="todayTasks[emp].length===0">
            <div class="empty-state text-center">
              <i class="fas fa-inbox"></i>
              <p class="mt-2 text-slate-600">No tasks selected for today</p>
            </div>
          </template>
          <template x-for="job in todayTasks[emp]" :key="emp+'-'+job.id">
            <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp md:flex justify-between items-start">
              <div class="flex-1">
                <h4 class="text-lg font-bold uppercase text-slate-800" x-text="job.name"></h4>
                <p class="text-slate-600" x-text="job.description.slice(0,50)+(job.description.length>50?'...':'')"></p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                  <!-- Deadline -->
                  <div>
                    <label class="text-xs uppercase text-slate-500 block mb-1">Deadline</label>
                    <input
                      type="date"
                      class="input-field"
                      :value="job.deadline"
                      @change="updateTask(emp, job.id, 'deadline', $event.target.value)"
                    />
                  </div>

                  <!-- Revisions -->
                  <div>
                    <label class="text-xs uppercase text-slate-500 block mb-1">Revisions</label>
                    <div class="flex items-center gap-2">
                      <button
                        class="w-8 h-8 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center"
                        @click="updateTask(emp, job.id, 'revisions', Math.max(0, job.revisions-1))"
                      ><i class="fas fa-minus"></i></button>
                      <span class="font-medium" x-text="job.revisions"></span>
                      <button
                        class="w-8 h-8 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center"
                        @click="updateTask(emp, job.id, 'revisions', job.revisions+1)"
                      ><i class="fas fa-plus"></i></button>
                    </div>
                  </div>

                  <!-- Payment -->
                  <div>
                    <label class="text-xs uppercase text-slate-500 block mb-1">Payment</label>
                    <select
                      class="input-field mb-2"
                      :value="job.payment"
                      @change="updateTask(emp, job.id, 'payment', $event.target.value)"
                    >
                      <option value="NOT PAID">NOT PAID</option>
                      <option value="PAID">PAID</option>
                      <option value="DON'T KNOW">DON'T KNOW</option>
                    </select>
                    <input
                      type="number"
                      class="input-field"
                      :value="job.amount || 0"
                      placeholder="Amount"
                      @change="updateTask(emp, job.id, 'amount', parseFloat($event.target.value)||0)"
                    />
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="mt-4 md:mt-0 flex flex-col gap-2 md:ml-4">
                <button
                  class="btn btn-success"
                  @click="markDone(emp, job.id)"
                ><i class="fas fa-check mr-2"></i>MARK DONE</button>
                <button
                  class="btn btn-danger"
                  @click="removeTask(emp, job.id)"
                ><i class="fas fa-trash mr-2"></i>DELETE</button>
              </div>
            </div>
          </template>
        </div>
      </template>
    </section>

    <!-- ACTIVE -->
    <section x-show="tab==='active'" x-transition class="animate__animated animate__fadeIn">
      <h2 class="text-2xl font-bold uppercase text-slate-800 mb-6">ACTIVE TASKS</h2>
      <template x-for="emp in employees" :key="emp">
        <div class="mb-8">
          <h3 class="section-heading flex items-center mb-4">
            <span :class="`employee-badge employee-${emp.toLowerCase()}`" class="mr-2" x-text="emp"></span>
            Active Tasks
          </h3>
          <template x-if="activeTasks(emp).length===0">
            <div class="empty-state text-center">
              <i class="fas fa-clipboard-list"></i>
              <p class="mt-2 text-slate-600">No active tasks</p>
            </div>
          </template>
          <template x-for="job in activeTasks(emp)" :key="emp+'-act-'+job.id">
            <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp md:flex justify-between items-start">
              <div class="flex-1">
                <h4 class="text-lg font-bold uppercase text-slate-800" x-text="job.name"></h4>
                <p class="text-slate-600" x-text="job.description.slice(0,50)+(job.description.length>50?'...':'')"></p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                  <!-- Deadline -->
                  <div>
                    <label class="text-xs uppercase text-slate-500 block mb-1">Deadline</label>
                    <input
                      type="date"
                      class="input-field"
                      :value="job.deadline"
                      @change="updateTask(emp, job.id, 'deadline', $event.target.value)"
                    />
                  </div>

                  <!-- Revisions -->
                  <div>
                    <label class="text-xs uppercase text-slate-500 block mb-1">Revisions</label>
                    <div class="flex items-center gap-2">
                      <button
                        class="w-8 h-8 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center"
                        @click="updateTask(emp, job.id, 'revisions', Math.max(0, job.revisions-1))"
                      ><i class="fas fa-minus"></i></button>
                      <span class="font-medium" x-text="job.revisions"></span>
                      <button
                        class="w-8 h-8 rounded-lg bg-slate-100 hover:bg-slate-200 flex items-center justify-center"
                        @click="updateTask(emp, job.id, 'revisions', job.revisions+1)"
                      ><i class="fas fa-plus"></i></button>
                    </div>
                  </div>

                  <!-- Payment -->
                  <div>
                    <label class="text-xs uppercase text-slate-500 block mb-1">Payment</label>
                    <select
                      class="input-field mb-2"
                      :value="job.payment"
                      @change="updateTask(emp, job.id, 'payment', $event.target.value)"
                    >
                      <option value="NOT PAID">NOT PAID</option>
                      <option value="PAID">PAID</option>
                      <option value="DON'T KNOW">DON'T KNOW</option>
                    </select>
                    <input
                      type="number"
                      class="input-field"
                      :value="job.amount || 0"
                      placeholder="Amount"
                      @change="updateTask(emp, job.id, 'amount', parseFloat($event.target.value)||0)"
                    />
                  </div>
                </div>
              </div>

              <!-- Actions -->
              <div class="mt-4 md:mt-0 flex flex-col gap-2 md:ml-4">
                <button
                  class="btn btn-success"
                  @click="markDone(emp, job.id)"
                ><i class="fas fa-check mr-2"></i>MARK DONE</button>
                <button
                  class="btn btn-danger"
                  @click="removeTask(emp, job.id)"
                ><i class="fas fa-trash mr-2"></i>DELETE</button>
              </div>
            </div>
          </template>
        </div>
      </template>
    </section>

    <!-- DONE -->
    <section x-show="tab==='done'" x-transition class="animate__animated animate__fadeIn">
      <h2 class="text-2xl font-bold uppercase text-slate-800 mb-6">TASKS DONE</h2>
      <template x-for="emp in employees" :key="emp">
        <div class="mb-8">
          <h3 class="section-heading flex items-center mb-4">
            <span :class="`employee-badge employee-${emp.toLowerCase()}`" class="mr-2" x-text="emp"></span>
            Completed Tasks
          </h3>
          <template x-if="doneTasks(emp).length===0">
            <div class="empty-state text-center">
              <i class="fas fa-check-circle"></i>
              <p class="mt-2 text-slate-600">No completed tasks</p>
            </div>
          </template>
          <template x-for="job in doneTasks(emp)" :key="emp+'-done-'+job.id">
            <div class="task-card p-5 mb-5 animate__animated animate__fadeInUp md:flex justify-between items-start">
              <div class="flex-1">
                <h4 class="text-lg font-bold uppercase text-slate-800" x-text="job.name"></h4>
                <p class="text-slate-600" x-text="job.description"></p>
                <p class="text-sm text-slate-500 uppercase mt-2">
                  Done On: <span x-text="job.done"></span>
                </p>
                <p class="text-sm text-slate-500 uppercase mt-1">
                  Deadline: <span x-text="job.deadline"></span>
                </p>
              </div>
              <span class="badge badge-success ml-4">
                <i class="fas fa-check-circle mr-1"></i> DONE
              </span>
            </div>
          </template>
        </div>
      </template>
    </section>
  </main>
</div>

  <script>
    //  CHANGE THIS to your Firebase Realtime DB URL (no trailing slash):
    const API_URL = 'https://task-manager-global-default-rtdb.firebaseio.com';

    async function apiGet(path, fallback = null) {
      const res = await fetch(`${API_URL}/${path}.json`);
      if (!res.ok) return fallback;
      const data = await res.json();
      return data === null ? fallback : data;
    }
    async function apiPut(path, data) {
      await fetch(`${API_URL}/${path}.json`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
    }

    function employeeDashboard(name) {
      return {
        name,
        tab: 'today',
        status: 'FREE',
        tasks: [],
        todayTasks: [],
        todayDate: '',
        newJob: { name:'', description:'', deadline: new Date().toISOString().substr(0,10), created: new Date().toISOString().substr(0,10), revisions:0, payment:'NOT PAID', id:null, amount:0 },
        descContent: '',
        selectedToday: [],
        showAddModal:false, showDescModal:false, showTodayModal:false,

        async init() {
          // load all persisted data
          this.status      = await apiGet(`${this.name}_status`, 'FREE');
          this.tasks       = await apiGet(`${this.name}_tasks`, []);
          this.todayTasks  = await apiGet(`${this.name}_todayTasks`, []);
          this.todayDate   = await apiGet(`${this.name}_todayDate`, '');
          this.resetToday();
        },
        async save() {
          await Promise.all([
            apiPut(`${this.name}_tasks`,      this.tasks),
            apiPut(`${this.name}_status`,     this.status),
            apiPut(`${this.name}_todayTasks`, this.todayTasks),
            apiPut(`${this.name}_todayDate`,  this.todayDate),
          ]);
        },
        async toggleStatus() {
          this.status = this.status === 'FREE' ? 'BUSY' : 'FREE';
          await this.save();
        },
        activeTasks() { return this.tasks.filter(j => !j.done); },
        doneTasks()   { return this.tasks.filter(j => j.done); },

        async addJob() {
          const j = { ...this.newJob, id: Date.now() };
          this.tasks.push(j);
          this.newJob = { name:'', description:'', deadline: new Date().toISOString().substr(0,10),
                          created: new Date().toISOString().substr(0,10), revisions:0, payment:'NOT PAID',
                          id:null, amount:0 };
          await this.save();
          this.closeModals();
        },
        async removeById(id) {
          this.tasks = this.tasks.filter(j => j.id !== id);
          await this.save();
        },
        async markDoneById(id) {
          const i = this.tasks.findIndex(j => j.id === id);
          this.tasks[i].done = new Date().toLocaleDateString();
          await this.save();
        },
        async changeRevisionById(id,val) {
          const i = this.tasks.findIndex(j => j.id === id);
          this.tasks[i].revisions = Math.max(0, this.tasks[i].revisions + val);
          await this.save();
        },
        showDesc(job) {
          this.descContent = job.description;
          this.showDescModal = true;
        },
        toggleSelection(id) {
          const s = id.toString();
          const idx = this.selectedToday.indexOf(s);
          if (idx>=0) this.selectedToday.splice(idx,1);
          else        this.selectedToday.push(s);
        },
        async addTodayTasks() {
          this.todayTasks = this.tasks.filter(j => this.selectedToday.includes(j.id.toString()));
          this.todayDate = new Date().toLocaleDateString();
          this.tab = 'today';
          await this.save();
          this.closeModals();
        },
        resetToday() {
          const today = new Date().toLocaleDateString();
          if (this.todayDate !== today) {
            this.todayTasks = [];
            this.todayDate  = today;
            this.save();
          }
        },
        async reviseAgain(id) {
          const i = this.tasks.findIndex(j => j.id === id);
          delete this.tasks[i].done;
          await this.save();
        },
        closeModals() {
          this.showAddModal = this.showDescModal = this.showTodayModal = false;
          this.selectedToday = [];
        }
      }
    }

   function ownerDashboard() {
    return {
      tab: 'today',
      employees: ['ABUZAR', 'KAMRAN'],
      tasks: {},
      todayTasks: {},
      status: {},

      async init() {
        for (let emp of this.employees) {
          this.tasks[emp]      = await apiGet(`${emp}_tasks`, []);
          this.todayTasks[emp] = await apiGet(`${emp}_todayTasks`, []);
          this.status[emp]     = await apiGet(`${emp}_status`, 'FREE');
        }
      },

      async toggleStatus(emp) {
        const next = this.status[emp] === 'FREE' ? 'BUSY' : 'FREE';
        await apiPut(`${emp}_status`, next);
        this.status[emp] = next;
      },

      activeTasks(emp) {
        return (this.tasks[emp]||[]).filter(j=>!j.done);
      },

      doneTasks(emp) {
        return (this.tasks[emp]||[]).filter(j=>!!j.done);
      },

      async updateTask(emp, id, field, value) {
        // update local
        let arr = this.tasks[emp];
        const idx = arr.findIndex(j=>j.id===id);
        if (idx<0) return;
        arr[idx][field] = value;
        // persist
        await apiPut(`${emp}_tasks`, arr);
      },

      async markDone(emp, id) {
        const date = new Date().toLocaleDateString();
        await this.updateTask(emp, id, 'done', date);
      },

      async removeTask(emp, id) {
        let arr = this.tasks[emp].filter(j=>j.id!==id);
        this.tasks[emp] = arr;
        await apiPut(`${emp}_tasks`, arr);
      }
    }
  }

  function mainApp() {
  return {
    showUserSelect: true,
    currentUser: null,
    // initialize both employee dashboards here
    dashboards: {
      ABUZAR: employeeDashboard('ABUZAR'),
      KAMRAN: employeeDashboard('KAMRAN'),
    },
    ownerData: ownerDashboard(),
    selectUser(user) {
      this.currentUser = user;
      this.showUserSelect = false;
      if (user==='ABUZAR' || user==='KAMRAN') {
        // load their data on first selection
        this.dashboards[user].init();
      }
    }
  }
}

  </script>
</html>
